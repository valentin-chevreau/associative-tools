:root{
  --bg:#f5f7fb;
  --card:#ffffff;
  --primary:#2563eb;
  --success:#16a34a;
  --muted:#6b7280;
  --danger:#dc2626;
  --checkout-footer-height:72px;
}

/* ============= RESET SIMPLE ============= */
*{
  box-sizing:border-box;
  font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
}

body{
  margin:0;
  background:var(--bg);
  color:#0f172a;
  padding:80px 80px 120px; /* bas augmenté pour le footer */
}

/* Page caisse : moins de marge en haut pour être collé à la nav */
body.page-caisse{
  padding-top:4px;
}

/* Conteneur principal */
.app{
  max-width:1100px;
  margin:10px auto 0;
  padding:10px;
}

/* Grille générale */
.grid{
  display:grid;
  grid-template-columns:1fr;
  gap:10px;
}
@media(min-width:900px){
  .grid{
    grid-template-columns:2fr 1fr;
  }
}

/* Cartes */
.card{
  background:var(--card);
  border-radius:16px;
  padding:12px;
  box-shadow:0 8px 20px rgba(15,23,42,0.06);
}

.small{
  font-size:13px;
  color:var(--muted);
}

select,
input{
  width:100%;
  padding:8px;
  border-radius:8px;
  border:1px solid #d1d5db;
  font-size:14px;
}

/* ============= TOAST ============= */

.flash{
  position:fixed;
  top:20px;
  left:50%;
  transform:translateX(-50%);
  padding:14px 20px;
  border-radius:12px;
  background:#1f2937;
  font-size:16px;
  z-index:9999;
  box-shadow:0 4px 20px rgba(0,0,0,0.25);
  opacity:0;
  transition:opacity .25s ease;
}
.flash.show{
  opacity:1;
}
.flash-error{
  background:#dc2626;
}
.flash-success{
  background:#16a34a;
}

/* ============= RÉSUMÉ / EN-TÊTE CAISSE ============= */
.sticky-summary{
  position:sticky;
  top:0;
  z-index:5;
  background:var(--card);
  padding-bottom:6px;
}
.summary-main{
  display:flex;
  gap:8px;
  flex-wrap:wrap;
  justify-content:space-between;
  align-items:flex-start;
}

/* Mode rapide : toggle */
.quick-toggle{
  text-align:right;
  margin-top:4px;
}
.quick-toggle button{
  padding:4px 8px;
  border-radius:999px;
  border:1px solid #d1d5db;
  background:#ffffff;
  font-size:12px;
  cursor:pointer;
}

/* ============= HEADER PRODUITS + SWITCH ============= */
.products-header-row{
  display:flex;
  justify-content:space-between;
  align-items:center;
  gap:12px;
  margin-top:8px;
  margin-bottom:8px;
}
.products-header-row h3{
  margin:0;
}

.view-toggle{
  display:inline-flex;
  background:#e5e7eb;
  border-radius:999px;
  padding:4px;
  gap:4px;
}
.view-toggle button{
  border:none;
  background:transparent;
  border-radius:999px;
  padding:5px 10px;
  font-size:13px;
  display:inline-flex;
  align-items:center;
  gap:6px;
  cursor:pointer;
}
.view-toggle button.active{
  background:#2563eb;
  color:#fff;
}
.view-icon{
  font-size:14px;
}
.view-label{
  font-size:12px;
}

/* ============= PRODUITS (TUILES) ============= */
.products{
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(130px,1fr));
  gap:8px;
  margin-top:4px;
}
.product{
  position:relative;
  background:#f8fafc;
  border-radius:12px;
  border:1px solid #e5e7eb;
  padding:10px;
  cursor:pointer;
  display:flex;
  flex-direction:column;
  justify-content:space-between;
  text-align:center;
  height:120px;
}
.product.out{
  opacity:0.6;
}
.product-name{
  font-weight:700;
  font-size:15px;
  line-height:1.2;
  min-height:32px;
  overflow:hidden;
}
.product-price{
  margin-top:4px;
  font-size:14px;
  font-weight:600;
}
.product-stock{
  margin-top:auto;
  font-size:13px;
  color:var(--muted);
}

/* PRODUITS (VUE LISTE) */
body.view-list .products{
  display:flex;
  flex-direction:column;
}
body.view-list .product{
  height:auto;
  flex-direction:row;
  align-items:center;
  text-align:left;
  padding:8px 10px;
}
body.view-list .product-name{
  flex:2;
  min-height:auto;
  text-align:left;
}
body.view-list .product-price{
  flex:1;
  text-align:right;
}
body.view-list .product-stock{
  flex:1;
  text-align:right;
}

/* Desktop : maximum 4 produits par ligne */
@media (min-width: 900px){
  .products{
    grid-template-columns: repeat(4, minmax(0, 1fr));
  }

  /* Titre sur une seule ligne, coupé proprement */
  .product-name{
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    font-size: 15px;
  }
}

/* Badge quantité */
.product-qty-badge{
  position:absolute;
  top:6px;
  right:6px;
  min-width:22px;
  height:22px;
  border-radius:999px;
  background:#2563eb;
  color:#fff;
  font-size:12px;
  display:flex;
  align-items:center;
  justify-content:center;
  font-weight:700;
}
.product-qty-badge.hidden{
  display:none;
}

/* ============= DON LIBRE ============= */
.don-block{
  margin-top:10px;
  padding:8px;
  border-radius:12px;
  background:#ecfdf5;
  border:1px solid #bbf7d0;
  font-size:13px;
}
.don-row{
  display:flex;
  gap:6px;
  margin-top:6px;
}
.don-row input{
  flex:1;
}

/* ============= PANIER ============= */
.cart-header-row{
  display:flex;
  justify-content:space-between;
  align-items:center;
  gap:8px;
}
.cart-header-row h3{
  margin:0;
}

.cart-toggle-bar{
  font-size:13px;
  cursor:pointer;
  padding:4px 8px;
  border-radius:999px;
  border:1px solid #e5e7eb;
  background:#f9fafb;
  display:flex;
  align-items:center;
  gap:6px;
}
.cart-toggle-label{
  white-space:nowrap;
}
.cart-toggle-chevron{
  font-size:10px;
}
body.quick-mode .cart-toggle-bar{
  background:#e0f2fe;
  border-color:#bae6fd;
}

.cart-details{
  margin-top:8px;
}

/* Lignes du panier */
.cart-line{
  display:flex;
  justify-content:space-between;
  align-items:center;
  border-bottom:1px dashed #e5e7eb;
  padding:6px 0;
  font-size:14px;
}
.cart-name{
  flex:1;
}

.cart-title{
  display:flex;
  gap:6px;
  align-items:baseline;
}
.cart-qty{
  color:#6b7280;
  font-weight:500;
}
.cart-prices{
  margin-top:2px;
  display:flex;
  gap:6px;
  align-items:baseline;
  flex-wrap:wrap;
}
.price-old{
  text-decoration:line-through;
  color:#9ca3af;
}
.price-new{
  font-weight:700;
}
.discount-note{
  color:#6b7280;
  font-size:12px;
}
.btn-discount{
  min-width:34px;
}
.cart-controls{
  display:flex;
  align-items:center;
  gap:4px;
}
.cart-controls button{
  padding:6px 10px;
  border-radius:8px;
  border:0;
  cursor:pointer;
  font-size:13px;
}
.btn-minus{background:#e5e7eb;color:#111;}
.btn-plus{background:#e5e7eb;color:#111;}
.btn-trash{background:#fee2e2;color:var(--danger);}

/* Montant du panier */
.cart-total-panel{
  margin-top:8px;
  margin-bottom:8px;
  padding:8px 10px;
  border-radius:10px;
  background:#eff6ff;
  border:1px solid #bfdbfe;
  display:flex;
  justify-content:space-between;
  align-items:baseline;
}
.cart-total-label{
  font-size:12px;
  color:#6b7280;
}
.cart-total-value{
  font-size:18px;
  font-weight:700;
}

/* Actions panier (vider / attente / rappel) */
.cart-top-actions{
  display:flex;
  flex-wrap:wrap;
  gap:6px;
  margin-bottom:10px;
}
.cart-top-actions .btn-secondary{
  flex:1 1 150px;
}

/* Alignement propre des boutons + SVG */
.cart-top-actions button{
  display:flex;
  align-items:center;
  justify-content:center;
  gap:6px;
  padding:10px 12px;
  height:auto !important;
}
.cart-top-actions .btn-svg{
  width:18px;
  height:18px;
  margin:0;
  flex-shrink:0;
  display:block;
}
.cart-top-actions .btn-label{
  line-height:1.1;
}

/* ============= RENDU MONNAIE ============= */
.cash-block{
  margin-top:10px;
  padding:10px;
  border-radius:14px;
  background:#fefce8;
  border:1px solid #facc15;
  font-size:13px;
}
.cash-block.highlight{
  border-color:#f97316;
  box-shadow:0 0 0 2px rgba(249,115,22,0.25);
}
.cash-row{
  display:flex;
  flex-wrap:wrap;
  gap:8px;
  align-items:flex-start;
}
.cash-row input{
  width:120px;
}
.cash-quick{
  margin-top:6px;
  display:flex;
  flex-wrap:wrap;
  gap:4px;
}
.cash-quick button{
  padding:4px 8px;
  border-radius:999px;
  border:1px solid #d1d5db;
  background:#ffffff;
  font-size:12px;
  cursor:pointer;
}
.cash-main-amount{
  font-size:22px;
  font-weight:800;
  margin-top:4px;
}

/* ============= PAIEMENTS ENREGISTRÉS ============= */
#payments-block{
  margin-top:10px;
  padding:10px 12px;
  border-radius:12px;
  background:#eff6ff;
  border:1px solid #dbeafe;
  font-size:13px;
  line-height:1.4;
  box-shadow:0 1px 2px rgba(15,23,42,0.06);
  display:none; /* masqué par défaut */
}
#payments-block:not(.payments-empty){
  display:block;
}
#payments-block.payments-empty{
  padding:0;
  margin-top:0;
  border:none;
  background:transparent;
  box-shadow:none;
}

#payments-block .payments-header{
  font-weight:600;
  margin-bottom:6px;
}
#payments-block .payments-rows{
  margin-bottom:6px;
}
#payments-block .payment-row{
  display:flex;
  justify-content:space-between;
  align-items:baseline;
  gap:8px;
  margin-bottom:2px;
}
#payments-block .payment-method{
  color:#374151;
}
#payments-block .payment-amount{
  font-weight:600;
}

#payments-block .payments-summary{
  display:flex;
  justify-content:space-between;
  gap:8px;
  margin-top:4px;
  padding-top:6px;
  border-top:1px dashed #d1d5db;
}
#payments-block .summary-item{
  display:flex;
  flex-direction:column;
}
#payments-block .summary-label{
  font-size:12px;
  color:#6b7280;
}
#payments-block .summary-value{
  font-weight:700;
  font-size:16px;
}
#payments-block .summary-warning{
  color:#b91c1c;
}

/* ============= ACTIONS PAIEMENTS (Réinit / Valider) ============= */
.payments-actions-row{
  display:flex;
  flex-wrap:wrap;
  gap:6px;
  margin-top:8px;
  margin-bottom:10px;
}
.payments-actions-row .btn-secondary,
.payments-actions-row .btn-primary{
  flex:1 1 150px;
}

/* ============= DERNIÈRES VENTES (TIMELINE) ============= */
.timeline-block{
  margin-top:10px;
  padding-top:8px;
  border-top:1px solid #e5e7eb;
}
.timeline-title{
  display:block;
  font-size:13px;
  margin-bottom:4px;
}
.timeline-item{
  display:grid;
  grid-template-columns:minmax(0,1fr) minmax(0,1fr) auto;
  gap:4px 8px;
  padding:4px 0;
  font-size:12px;
  border-bottom:1px dashed #e5e7eb;
}
.timeline-item:last-child{
  border-bottom:none;
}
.timeline-products{
  font-weight:600;
}
.timeline-payments{
  color:#4b5563;
}
.timeline-total{
  font-weight:700;
  text-align:right;
}

/* Bouton annulation dernière vente */
.undo-sale-btn{
  width:100%;
  margin-top:10px;
}
.undo-sale-btn[disabled]{
  opacity:0.4;
  cursor:not-allowed;
}

/* ============= RÉCAP EN BAS ============= */
.recap-bottom{
  background:#ffffff;
  border-top:1px solid #e5e7eb;
  padding:6px 12px;
  z-index:50;
  margin:10px auto 0;
  max-width:1100px;
}
.recap-row{
  display:flex;
  justify-content:space-between;
  text-align:center;
  font-size:12px;
  gap:4px;
}
.recap-item{
  flex:1;
  background:#f9fafb;
  padding:6px 4px;
  border-radius:8px;
  border:1px solid #e5e7eb;
}
.recap-item strong{
  font-size:13px;
}
.recap-item span{
  color:#6b7280;
}

/* ============= FOOTER ENCAISSEMENT (CB / ESPÈCES / CHÈQUE) ============= */
.checkout-footer{
  position:fixed;
  left:0;
  right:0;
  bottom:0;
  background:#ffffff;
  border-top:1px solid #e5e7eb;
  padding:8px 16px;
  display:flex;
  gap:8px;
  align-items:center;
  z-index:90;
  min-height:56px;
}
.checkout-total{
  font-weight:800;
  font-size:22px;
  white-space:nowrap;
  margin-right:8px;
}
.checkout-actions{
  display:flex;
  gap:6px;
  flex:1;
}

/* Centrage du footer sur desktop à 1100px */
@media(min-width:900px){
  .checkout-footer{
    max-width:1100px;
    left:50%;
    transform:translateX(-50%);
  }
}

/* ============= BOUTONS GÉNÉRIQUES ============= */
button{
  padding:10px 12px;
  border-radius:10px;
  border:0;
  font-weight:800;
  cursor:pointer;
  font-size:14px;
}

.btn-cb{
  background:var(--success);
  color:#fff;
  flex:1;
}
.btn-cash{
  background:var(--primary);
  color:#fff;
  flex:1;
}
.btn-cheque{
  background:#0f766e;
  color:#fff;
  flex:1;
}

.btn-secondary{
  background:#e5e7eb;
  color:#111;
  text-align:center;
}
.btn-primary{
  background:#16a34a;
  color:#fff;
  text-align:center;
}

.btn-icon{
  margin-right:4px;
}
.btn-text{
  display:inline;
}

/* Bouton valider forcé vert */
#finalize-btn{
  background:#16a34a !important;
  color:#fff;
}

/* Carton du panier (fond) */
.cart-card{
  background:#ffffff !important;
}

/* ============= FOOTER : ICÔNES + LABELS (CB / Espèces / Chèque) ============= */
.checkout-actions button{
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  padding:12px 0 !important;
}
.btn-svg{
  width:26px;
  height:26px;
  margin-bottom:4px;
  fill:none;
  stroke:#ffffff;
  stroke-width:1.8;
}
.btn-label{
  font-size:13px;
  font-weight:600;
}

/* ============= MODE RAPIDE ============= */
body.quick-mode .summary-main{
  display:none;
}
body.quick-mode .don-block .small{
  display:none;
}
body.quick-mode .quick-toggle button{
  background:#2563eb;
  color:#fff;
  border-color:#1d4ed8;
}
body.quick-mode .timeline-block,
body.quick-mode .recap-bottom{
  display:none;
}
body.quick-mode .undo-sale-btn{
  display:none;
}

/* Cacher la nav + header produits en mode rapide */
body.quick-mode #main-nav,
body.quick-mode .products-header-row,
body.quick-mode .recap-bottom{
  display:none !important;
}

body.quick-mode{
  padding-top:8px !important;
  background:linear-gradient(180deg,#dbeafe 0%,#eff6ff 100%) !important;
}
body.quick-mode .sticky-summary{
  padding-top:2px;
  padding-bottom:2px;
}

/* Bannière "MODE RAPIDE" */
#quick-banner{
  display:none;
  position:fixed;
  top:0;
  left:0;
  right:0;
  background:#2563eb;
  color:white;
  padding:6px 12px;
  text-align:center;
  font-size:14px;
  font-weight:600;
  z-index:2000;
}
body.quick-mode #quick-banner{
  display:block;
}

/* ============= TABLEAUX (AUTRES PAGES) ============= */
.table-wrapper{
  width:100%;
  overflow-x:auto;
}
.table-wrapper table{
  min-width:700px;
}

/* ============= CLAVIER OUVERT (MOBILE) ============= */
body.keyboard-open .recap-bottom,
body.keyboard-open .checkout-footer{
  position:static;
}

/* ============= MOBILE ============= */
@media(max-width:700px){

  body{
    padding:8px 8px 70px;
  }

  .products-header-row{
    flex-direction:column;
    align-items:flex-start;
    gap:4px;
  }
  .view-toggle{
    align-self:flex-start;
  }

  .product{
    height:110px;
    padding:8px;
  }
  .product-name{
    font-size:14px;
    min-height:28px;
  }
  .product-price{
    font-size:13px;
  }

  /* Vider + Rappel côte à côte */
  .cart-top-actions{
    display:grid;
    grid-template-columns:1fr 1fr;
    gap:6px;
  }
  .cart-top-actions button{
    font-size:13px;
    padding:10px 8px;
  }

  /* Réinitialiser + Valider côte à côte */
  .payments-actions-row{
    display:grid;
    grid-template-columns:1fr 1fr;
    gap:6px;
  }
  #reset-payments-btn,
  #finalize-btn{
    width:100%;
    margin-top:0;
  }

  .checkout-total{
    font-size:20px;
  }

  /* Sur mobile, on peut masquer le texte des gros boutons si tu veux
     → pour l’instant on laisse icône + texte, plus clair pour les bénévoles */
}

/* ========================================
   Alignement icône + texte (zone panier)
   ======================================== */

/* Boutons du bloc "Vider / Mise en attente / Rappeler vente" */
.cart-top-actions .btn-secondary {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
}

/* Boutons "Réinitialiser" et "Valider" */
.payments-actions-row .btn-secondary,
.payments-actions-row .btn-primary {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
}

/* Bouton "Annuler la dernière vente" */
.undo-sale-btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
}

/* Icônes dans ces boutons (sauf footer) */
.cart-top-actions .btn-svg,
.payments-actions-row .btn-svg,
.undo-sale-btn .btn-svg {
    width: 18px;
    height: 18px;
    margin: 0;
    flex-shrink: 0;
}

/* Libellé texte */
.cart-top-actions .btn-label,
.payments-actions-row .btn-label,
.undo-sale-btn .btn-label {
    display: inline-block;
    line-height: 1.1;
}

/* Icônes plus contrastées sur les boutons gris (hors footer) */
.cart-top-actions .btn-secondary .btn-svg,
.payments-actions-row .btn-secondary .btn-svg,
.undo-sale-btn .btn-svg {
    stroke: #374151;      /* gris foncé */
    stroke-width: 2;      /* un poil plus épais */
}

/* Tous les boutons du bloc "top actions" centrés */
.cart-top-actions .btn-secondary {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
}

/* Ajustement fin des SVG de mise en attente / rappel vente */
#hold-btn .btn-svg,
#resume-btn .btn-svg {
    width: 18px;
    height: 18px;
    margin: 0;
    flex-shrink: 0;
    transform: translateY(1px);  /* petit nudge vers le bas */
}

/* Libellé */
.cart-top-actions .btn-label {
    display: inline-block;
    line-height: 1.1;
}

.btn-don{
  display:flex;
  align-items:center;
  justify-content:center;
  gap:6px;
}

.btn-svg{
  width:22px;
  height:22px;
  fill:none;
  stroke:#111827;
  stroke-width:1.8;
}
.btn-secondary .btn-svg{
  stroke:#4b5563;
}
.btn-primary .btn-svg{
  stroke:#ffffff;
}

.btn-keep-change{
  display:none;
  margin-top:6px;
  padding:4px 10px;
  border-radius:999px;
  border:1px dashed #f97316;
  background:#fffbeb;
  color:#9a3412;
  font-size:12px;
  cursor:pointer;
}

/* =========================
   CAISSE – Select "Bénévole" comme un vrai select (style "Tous" stock)
   ========================= */

#benevole{
  -webkit-appearance: none;
  -moz-appearance: none;
  appearance: none;

  width: 100%;
  height: 44px;
  padding: 10px 42px 10px 12px; /* espace pour la flèche */
  border-radius: 12px;
  border: 1px solid var(--border);
  background: #fff;

  font-size: 14px;
  line-height: 1.2;
  color: #111827;

  /* Flèche */
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='20' height='20' viewBox='0 0 24 24'%3E%3Cpath fill='none' stroke='%236b7280' stroke-width='2' stroke-linecap='round' stroke-linejoin='round' d='M6 9l6 6 6-6'/%3E%3C/svg%3E");
  background-repeat: no-repeat;
  background-position: right 12px center;
  background-size: 18px 18px;

  box-shadow: 0 1px 0 rgba(15,23,42,0.02);
}

#benevole:focus{
  outline: none;
  border-color: #93c5fd;
  box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.15);
}

/* Optionnel : si désactivé (pas d'évènement) */
#benevole:disabled{
  background: #f3f4f6;
  color: #6b7280;
  cursor: not-allowed;
}

/* =========================
   CAISSE – FIX SELECT BÉNÉVOLE (force rendu "vrai select")
   ========================= */
body.page-caisse #benevole{
  -webkit-appearance: none !important;
  -moz-appearance: none !important;
  appearance: none !important;

  display: block !important;
  width: 100% !important;
  height: 44px !important;

  padding: 10px 42px 10px 12px !important;
  border-radius: 12px !important;

  border: 1px solid var(--border, #e5e7eb) !important;
  background-color: #fff !important;
  color: #111827 !important;

  font-size: 14px !important;
  line-height: 1.2 !important;

  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='20' height='20' viewBox='0 0 24 24'%3E%3Cpath fill='none' stroke='%236b7280' stroke-width='2' stroke-linecap='round' stroke-linejoin='round' d='M6 9l6 6 6-6'/%3E%3C/svg%3E") !important;
  background-repeat: no-repeat !important;
  background-position: right 12px center !important;
  background-size: 18px 18px !important;
}

body.page-caisse #benevole:focus{
  outline: none !important;
  border-color: #93c5fd !important;
  box-shadow: 0 0 0 3px rgba(37,99,235,.15) !important;
}

/* ================================
   PRODUITS (TUILES) – améliorations lisibilité
   (badge quantité + états stock)
   ================================ */

.products .product{
  position:relative;
  padding-top:32px;            /* réserve une zone pour le badge */
  overflow:hidden;
}

.products .product:active{
  transform:translateY(1px);
}

.products .product-qty-badge{
  position:absolute;
  top:8px;
  left:10px;
  right:10px;
  height:20px;
  border-radius:999px;
  display:flex;
  align-items:center;
  justify-content:center;
  font-weight:800;
  font-size:12px;
  letter-spacing:.3px;
  color:#fff;
  background:#4f46e5;
  box-shadow:0 1px 0 rgba(0,0,0,.08);
  pointer-events:none;
}

.products .product-qty-badge.hidden{
  display:none;
}

/* Quand qty > 0, on renforce un peu la tuile */
.products .product.has-qty{
  border-color:#4f46e5;
  box-shadow:0 2px 10px rgba(79,70,229,.12);
}

/* Stock : illimité / faible / rupture */
.products .product.unlimited .product-stock{
  color:#0f766e;
}

.products .product.low .product-stock{
  color:#b45309;
  font-weight:700;
}

.products .product.out{
  opacity:.55;
}

.products .product.out::after{
  content:"Rupture";
  position:absolute;
  top:10px;
  right:-38px;
  transform:rotate(35deg);
  background:#ef4444;
  color:#fff;
  font-weight:800;
  font-size:11px;
  padding:6px 44px;
  border-radius:999px;
  box-shadow:0 2px 10px rgba(0,0,0,.15);
}

/* Don libre : tuile à part (plus douce) */
.products .product.donation{
  background:#eef2ff;
  border-color:#c7d2fe;
}

/* Harmonise la typographie dans la tuile (si besoin) */
.products .product .product-name{
  line-height:1.15;
}

.products .product .product-price{
  margin-top:6px;
}

/* ===========================
   Badge quantité produit (compact)
   =========================== */

/* Badge */
.product-qty-badge{
  position: absolute;
  top: 8px;
  right: 8px;

  /* évite l'effet "barre" */
  width: auto !important;
  max-width: calc(100% - 16px);

  min-width: 28px;
  height: 28px;
  padding: 0 10px;

  display: inline-flex;
  align-items: center;
  justify-content: center;

  border-radius: 999px;
  font-size: 13px;
  font-weight: 800;
  line-height: 1;

  background: #4f46e5;
  color: #fff;

  box-shadow: 0 2px 8px rgba(0,0,0,0.18);
  z-index: 3;
}

/* La tuile doit être un conteneur de positionnement */
.product{
  position: relative;
}

/* Mode liste : badge à droite, inline, pas en overlay */
.products.list-view .product .product-qty-badge{
  position: static;
  margin-left: auto;
  align-self: center;
  box-shadow: none;
}

/* Si tu as un "hidden" existant : on laisse faire, rien à changer */

/* ===========================
   Badge quantité – VERSION FINALE
   =========================== */

.product{
  position: relative;
}

.product-qty{
  position: absolute;
  top: 8px;
  right: 8px;

  min-width: 26px;
  height: 26px;
  padding: 0 8px;

  display: inline-flex;
  align-items: center;
  justify-content: center;

  border-radius: 999px;
  background: #4f46e5;
  color: #fff;

  font-size: 13px;
  font-weight: 800;
  line-height: 1;

  box-shadow: 0 2px 6px rgba(0,0,0,0.2);
  z-index: 10;
}

/* Mode liste : badge inline, PAS en barre */
.list-view .product .product-qty{
  position: static;
  margin-left: auto;
  box-shadow: none;
}

/* Le conteneur produit doit être "ancre" pour le badge */
.product{
  position: relative;
}

/* Badge quantité : rond/pillule en haut à droite */
.product-qty{
  position: absolute;
  top: 10px;
  right: 10px;

  /* rond/pillule */
  min-width: 26px;
  height: 22px;
  padding: 0 8px;
  border-radius: 999px;

  display: inline-flex;
  align-items: center;
  justify-content: center;

  font-weight: 800;
  font-size: 12px;
  line-height: 1;

  background: #4f46e5;
  color: #fff;

  box-shadow: 0 1px 2px rgba(0,0,0,.12);
  z-index: 2;
}

/* si tu as déjà .hidden, garde-le ; sinon : */
.product-qty.hidden{
  display: none !important;
}

.products.list .product {
  cursor: pointer;
}

.products.list .product:hover {
  background: #f8fafc;
}

.products-fast-title{
  margin: 8px 0 6px;
  font-size: 13px;
  font-weight: 700;
  color: #2563eb;
}

.products-fast{
  margin-bottom: 12px;
}

.products-fast .product{
  border-color: #93c5fd;
  background: #eff6ff;
}

/* petit boost de lisibilité */
.products-fast .product-name{
  font-size: 15px;
}
/* =========================
   Modal Remise (ligne / panier)
   ========================= */
.tu-modal{
  position: fixed;
  inset: 0;
  z-index: 9999;
  display: none;
}
.tu-modal.is-open{
  display: flex;
  align-items: center;
  justify-content: center;
}
.tu-modal-backdrop{
  position: absolute;
  inset: 0;
  background: rgba(17, 24, 39, .45);
}
.tu-modal-card{
  position: relative;
  width: min(520px, calc(100vw - 32px));
  background: #fff;
  border-radius: 16px;
  box-shadow: 0 20px 60px rgba(0,0,0,.25);
  overflow: hidden;
  transform: translateY(4px);
}
.tu-modal-header{
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 14px 16px;
  border-bottom: 1px solid #eef2f7;
}
.tu-modal-title{ margin: 0; font-size: 16px; }
.tu-modal-close{
  border: 0;
  background: #f3f4f6;
  width: 34px;
  height: 34px;
  border-radius: 10px;
  font-size: 20px;
  line-height: 34px;
  cursor: pointer;
}
.tu-modal-close:active{ transform: scale(.98); }
.tu-modal-body{ padding: 16px; }
.tu-modal-subtitle{ color: #6b7280; margin: 0 0 8px 0; font-size: 13px; }
.tu-modal-help{ color: #6b7280; margin: 0 0 12px 0; font-size: 13px; }
.tu-modal-input{
  width: 100%;
  padding: 12px 12px;
  border: 1px solid #e5e7eb;
  border-radius: 12px;
  font-size: 16px;
  outline: none;
}
.tu-modal-input:focus{ border-color: #93c5fd; box-shadow: 0 0 0 3px rgba(59,130,246,.15); }
.tu-modal-error{
  margin-top: 10px;
  padding: 10px 12px;
  background: #fef2f2;
  border: 1px solid #fecaca;
  color: #991b1b;
  border-radius: 12px;
  font-size: 13px;
}
.tu-modal-chips{
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  margin-top: 12px;
}
.tu-modal-chip{
  border: 1px solid #e5e7eb;
  background: #fff;
  border-radius: 999px;
  padding: 8px 12px;
  font-size: 13px;
  cursor: pointer;
}
.tu-modal-chip:active{ transform: scale(.98); }
.tu-modal-actions{
  display: flex;
  justify-content: flex-end;
  gap: 10px;
  margin-top: 16px;
}
.tu-modal-actions .btn-primary,
.tu-modal-actions .btn-secondary{
  border-radius: 12px;
}
